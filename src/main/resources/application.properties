# Heronix-Teacher Application Configuration

# ============================================================================
# Server Configuration (Multi-port fallback support)
# ============================================================================
# Primary port: 58280 (dedicated Teacher Portal port in rare 58xxx range)
# Fallback ports: 58281, 58282 (if primary is in use)
# Legacy fallback: 8083 (for backward compatibility)
server.port=58280

# Application Info
spring.application.name=Heronix-Teacher
app.version=1.0.0-SNAPSHOT

# H2 Database Configuration (Local Embedded, Offline-First)
spring.datasource.url=jdbc:h2:file:./data/eduproteacher;AUTO_SERVER=TRUE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# H2 Console (for debugging - disable in production)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# Logging Configuration
logging.level.root=INFO
logging.level.com.heronix.teacher=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.file.name=logs/eduproteacher.log

# JavaFX Configuration
javafx.title=Heronix-Teacher
javafx.width=1200
javafx.height=800

# Theme Configuration
app.theme.default=dark
app.theme.dark-stylesheet=/css/dark-theme.css
app.theme.light-stylesheet=/css/light-theme.css

# Auto-Sync Configuration (Network Communication with Multi-port Fallback)
sync.enabled=true
sync.mode=auto
# Sync modes: auto, manual, scheduled
sync.interval.seconds=15
# IT Admins can configure: 15, 30, 60, 300 (5min), 600 (10min), etc.
# Primary API URL: Port 9580 (Heronix-SIS server - custom port to avoid conflicts)
# Auto-fallback: 9580 → 9581 → 9582 (removed 8080 to avoid conflicts with other services)
sync.admin-server.url=http://localhost:9590
sync.admin-server.fallback-urls=http://localhost:9591,http://localhost:9592
sync.admin-server.api-path=/api/teacher-sync
sync.admin-server.timeout.seconds=10
sync.retry.max-attempts=3
sync.retry.delay.seconds=5
sync.batch-size=100

# Teacher Sync Configuration (Pull from Admin Database)
# This syncs teacher accounts FROM EduScheduler-Pro admin database TO local H2
# Enables teachers to login using credentials created in admin system
teacher.sync.enabled=true
teacher.sync.interval.seconds=300
# Sync interval: 300 = 5 minutes (recommended for production)
# For testing: 60 (1 minute), For production: 300-600 (5-10 minutes)

# Admin Database Connection (Heronix-SIS)
# IMPORTANT: Configure these to match your Heronix-SIS database
# Use environment variable for path flexibility: HERONIX_SIS_DB_PATH
teacher.sync.admin-db.url=${HERONIX_SIS_DB_PATH:jdbc:h2:file:../Heronix-SIS/data/heronix}
teacher.sync.admin-db.username=sa
teacher.sync.admin-db.password=
teacher.sync.admin-db.driver=org.h2.Driver
# For MySQL: jdbc:mysql://localhost:3306/heronix_sis
# For PostgreSQL: jdbc:postgresql://localhost:5432/heronix_sis

# Security Configuration
security.encryption.enabled=true
security.encryption.algorithm=AES-256
security.session.timeout.minutes=30
security.auto-lock.enabled=true
security.auto-lock.idle.minutes=10

# Network Detection
network.check.enabled=true
network.check.interval.seconds=30

# Data Export/Import
export.csv.enabled=true
export.csv.path=./exports
import.usb.enabled=true
import.usb.path=./imports

# Feature Flags (Phase 1)
feature.gradebook.enabled=true
feature.attendance.enabled=true
feature.hallpass.enabled=true
feature.reports.enabled=false
feature.messaging.enabled=true

# ============================================================================
# Heronix-Talk Messaging Server Configuration
# ============================================================================
# Primary server URL (port 9680 is default for Heronix-Talk)
talk.server.url=http://localhost:9680
# Fallback URLs if primary is unavailable
talk.server.fallback-urls=http://localhost:9681,http://localhost:9682
# Connection timeout
talk.server.timeout.seconds=10
# WebSocket reconnection settings
talk.reconnect.interval.seconds=5
talk.reconnect.max-attempts=5

# Performance
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Banner
spring.main.banner-mode=off

# ============================================================================
# MOCK/PRODUCTION TOGGLE CONFIGURATION
# ============================================================================
# Enable mock data for development/testing without full EduScheduler Pro integration
# Set to false for production deployment with real data sync

# Mock schedule data toggle
# When true: Dashboard shows realistic mock schedule data for testing
# When false: Loads actual schedule from EduScheduler Pro sync service
eduproteacher.schedule.mock.enabled=false

# Mock roster data toggle
# When true: Attendance shows all active students (testing mode)
# When false: Shows only enrolled students for each period from EduScheduler Pro
eduproteacher.roster.mock.enabled=false
